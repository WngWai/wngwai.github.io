![[Pasted image 20231023230321.png]]
函数是 `dplyr` 包中的一个函数，用于进行**左连接**操作。它将两个数据框按照**共享的键**进行连接，并保留左侧数据框的所有行，同时将右侧数据框中匹配的行合并到结果中。
```R
left_join(x, y, by = NULL, ...)
# 或者使用管道操作符 %>%
x %>% left_join(y, by = NULL, ...)
```
- `x`, `y`: 要连接的两个数据框或数据表。
- `by`：一个字符向量或一个包含字符向量的列表，用于指定**连接的键**。如果键的名称在左侧和右侧数据框中不同，可以使用 `by = c("left_key" = "right_key")` 的形式进行映射。如果不提供键，则 `left_join()` 函数将根据两个数据框中的所有列进行连接。
不指定键名，两个数据框中的所有具**有相同名称的列**进行连接
`by = c("key1", "key2")`多key

- `copy`: 逻辑值，指示是否复制 `x` 和 `y`。默认为 `TRUE`，表示在进行连接之前复制数据框。如果数据框很大，可以将其设置为 `FALSE`，以节省内存。
- `suffix`: 一个长度为2的字符向量，用于给具有相同列名的列添加后缀。默认为 `c(".x", ".y")`。
- `...`: 其他传递给底层连接函数的参数。

下面是一个示例，演示了 `left_join()` 函数的用法：

```R
library(dplyr)

# 创建第一个数据框
data1 <- data.frame(
  id = c(1, 2, 3),
  name = c("Alice", "Bob", "Charlie")
)

# 创建第二个数据框
data2 <- data.frame(
  id = c(1, 2, 4),
  age = c(25, 30, 35)
)

# 进行左连接
joined_data <- left_join(data1, data2, by = "id")

print(joined_data)
```

输出结果如下：

```
  id    name age
1  1   Alice  25
2  2     Bob  30
3  3 Charlie  NA
```

在上述示例中，我们创建了两个数据框 `data1` 和 `data2`。然后使用 `left_join()` 函数将这两个数据框按照共享的键 `"id"` 进行左连接。左连接结果保留了左侧数据框 `data1` 的所有行，并将右侧数据框 `data2` 中匹配的行合并到结果中。如果右侧数据框中没有与左侧数据框匹配的行，相应位置上的值将显示为 `NA`。


### 关于by参数的详细解释
在 R 语言中，`left_join()` 函数用于根据一个或多个字段（列）将两个数据框进行左连接（left join）。左连接是一种合并数据的操作，它将保留左侧数据框的所有行，并将右侧数据框中匹配的行添加到左侧数据框。`left_join()` 函数的 `by` 参数用于指定用于匹配的字段。以下是 `left_join()` 函数中 `by` 参数的详细讲解和示例使用：

```R
left_join(x, y, by = c("column1", "column2", ...))
```

参数：
- `x`：左侧数据框。
- `y`：右侧数据框。
- `by`：一个字符向量，指定用于匹配的字段（列）的名称。

示例用法：
```R
# 创建示例数据框
df1 <- data.frame(ID = c(1, 2, 3),
                  Name = c("John", "Alice", "Bob"),
                  Age = c(25, 30, 35))

df2 <- data.frame(ID = c(2, 3, 4),
                  City = c("New York", "Chicago", "Los Angeles"))

# 使用 left_join() 进行左连接
result <- left_join(df1, df2, by = "ID")
print(result)
```

在上述示例中，我们创建了两个示例数据框 `df1` 和 `df2`，它们包含了一些共同的字段 `ID`。我们想要根据 `ID` 字段将这两个数据框进行左连接操作。

使用 `left_join()` 函数，我们传递了左侧数据框 `df1` 和右侧数据框 `df2`，并通过 `by` 参数指定了要匹配的字段名称 `"ID"`。这将使函数根据 `ID` 字段的值进行匹配。

输出结果为：
```
  ID  Name Age       City
1  1  John  25       <NA>
2  2 Alice  30   New York
3  3   Bob  35    Chicago
```

结果数据框 `result` 保留了左侧数据框 `df1` 的所有行，并将右侧数据框 `df2` 中匹配的行添加到相应的列中。匹配失败的行将在结果数据框中显示为 `<NA>`（缺失值）。

需要注意的是，`by` 参数可以接受一个或多个字段的名称。在示例中，我们只使用了一个字段 `"ID"` 进行匹配。如果要匹配多个字段，只需在 `by` 参数中指定多个字段的名称即可，例如 `by = c("field1", "field2")`。

总结起来，`left_join()` 函数中的 `by` 参数用于指定用于匹配的字段，使得左连接操作能够根据指定的字段将两个数据框进行连接。